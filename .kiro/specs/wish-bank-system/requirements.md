# Requirements Document

## Introduction

Система "Банк Желаний" - это веб-приложение для управления желаниями между друзьями с трехуровневой валютной системой. Приложение позволяет пользователям создавать желания разной сложности, зарабатывать и тратить виртуальную валюту, а также взаимодействовать с друзьями через систему выполнения желаний.

Система включает три типа валют: зеленые желания (базовые), синие желания (редкие) и красные желания (легендарные) с возможностью конвертации между ними. Основная цель - создать увлекательную игровую механику для мотивации выполнения просьб и желаний между друзьями.

## Requirements

### Requirement 1

**User Story:** Как пользователь, я хочу зарегистрироваться в системе и получить стартовый баланс, чтобы начать использовать приложение

#### Acceptance Criteria

1. WHEN пользователь регистрируется в системе THEN система SHALL создать профиль пользователя с уникальным именем
2. WHEN пользователь успешно регистрируется THEN система SHALL автоматически создать кошелек с 5 зелеными желаниями
3. WHEN пользователь входит в систему THEN система SHALL отображать его текущий баланс всех валют
4. IF пользователь пытается зарегистрироваться с уже существующим email THEN система SHALL отклонить регистрацию с соответствующим сообщением

### Requirement 2

**User Story:** Как пользователь, я хочу управлять своим кошельком валют, чтобы отслеживать и конвертировать свои желания

#### Acceptance Criteria

1. WHEN пользователь просматривает кошелек THEN система SHALL отображать текущий баланс зеленых, синих и красных желаний
2. WHEN пользователь имеет 10 или более зеленых желаний THEN система SHALL предоставить возможность конвертации в 1 синее желание
3. WHEN пользователь имеет 10 или более синих желаний THEN система SHALL предоставить возможность конвертации в 1 красное желание
4. WHEN пользователь выполняет конвертацию THEN система SHALL списать исходную валюту и начислить целевую валюту
5. WHEN пользователь выполняет конвертацию THEN система SHALL записать транзакцию в историю операций

### Requirement 3

**User Story:** Как пользователь, я хочу создавать желания разных типов, чтобы другие пользователи могли их выполнить

#### Acceptance Criteria

1. WHEN пользователь создает желание THEN система SHALL требовать указания названия, описания и типа желания
2. WHEN пользователь создает зеленое желание THEN система SHALL установить стоимость 1 зеленое желание
3. WHEN пользователь создает синее желание THEN система SHALL установить стоимость 1 синее желание  
4. WHEN пользователь создает красное желание THEN система SHALL установить стоимость 1 красное желание
5. WHEN пользователь создает желание THEN система SHALL установить статус "активно" по умолчанию
6. IF название желания превышает 100 символов THEN система SHALL отклонить создание с сообщением об ошибке
7. IF описание желания превышает 500 символов THEN система SHALL отклонить создание с сообщением об ошибке

### Requirement 4

**User Story:** Как пользователь, я хочу просматривать и фильтровать желания, чтобы найти подходящие для выполнения

#### Acceptance Criteria

1. WHEN пользователь открывает список желаний THEN система SHALL отображать все доступные желания с их статусами
2. WHEN пользователь применяет фильтр по типу THEN система SHALL показывать только желания выбранного типа
3. WHEN пользователь просматривает желание THEN система SHALL отображать название, описание, тип, стоимость, создателя и статус
4. WHEN пользователь просматривает желание THEN система SHALL показывать цветовую кодировку по типу (зеленый/синий/красный)
5. IF желание имеет дедлайн THEN система SHALL отображать оставшееся время

### Requirement 5

**User Story:** Как пользователь, я хочу принимать и выполнять желания других пользователей, чтобы зарабатывать валюту

#### Acceptance Criteria

1. WHEN пользователь принимает желание THEN система SHALL изменить статус на "в процессе" и назначить исполнителя
2. WHEN пользователь отмечает желание как выполненное THEN система SHALL изменить статус на "выполнено"
3. WHEN желание помечается как выполненное THEN система SHALL списать стоимость с кошелька создателя
4. WHEN желание помечается как выполненное THEN система SHALL начислить стоимость на кошелек исполнителя
5. IF у создателя недостаточно средств THEN система SHALL не позволить завершить желание
6. WHEN транзакция завершается THEN система SHALL записать операции в историю транзакций

### Requirement 6

**User Story:** Как пользователь, я хочу оспаривать неподходящие желания, чтобы предложить альтернативы

#### Acceptance Criteria

1. WHEN пользователь оспаривает желание THEN система SHALL предоставить возможность написать комментарий с альтернативой
2. WHEN желание оспаривается THEN система SHALL уведомить создателя о споре
3. WHEN создатель получает спор THEN система SHALL предоставить возможность принять альтернативу или отклонить
4. IF создатель принимает альтернативу THEN система SHALL обновить описание желания
5. IF создатель отклоняет спор THEN система SHALL сохранить оригинальное желание без изменений

### Requirement 7

**User Story:** Как пользователь, я хочу добавлять друзей и управлять списком контактов, чтобы взаимодействовать с ними

#### Acceptance Criteria

1. WHEN пользователь отправляет запрос в друзья THEN система SHALL создать запрос со статусом "ожидает"
2. WHEN пользователь получает запрос в друзья THEN система SHALL уведомить его о новом запросе
3. WHEN пользователь принимает запрос THEN система SHALL изменить статус дружбы на "принято"
4. WHEN пользователь отклоняет запрос THEN система SHALL удалить запрос из системы
5. WHEN пользователи являются друзьями THEN система SHALL показывать их желания в общем списке
6. IF пользователь пытается добавить себя в друзья THEN система SHALL отклонить запрос

### Requirement 8

**User Story:** Как пользователь, я хочу быстро начислять валюту друзьям, чтобы поощрять их за хорошие дела

#### Acceptance Criteria

1. WHEN пользователь выбирает друга для начисления THEN система SHALL показать список доступных валют
2. WHEN пользователь начисляет валюту THEN система SHALL списать указанную сумму с его кошелька
3. WHEN пользователь начисляет валюту THEN система SHALL начислить сумму на кошелек получателя
4. IF у пользователя недостаточно средств THEN система SHALL отклонить операцию с сообщением об ошибке
5. WHEN начисление выполняется THEN система SHALL записать транзакции для обеих сторон
6. WHEN начисление выполняется THEN система SHALL уведомить получателя о поступлении средств

### Requirement 9

**User Story:** Как пользователь, я хочу просматривать историю своих транзакций, чтобы отслеживать движение валют

#### Acceptance Criteria

1. WHEN пользователь открывает историю транзакций THEN система SHALL отображать все операции в хронологическом порядке
2. WHEN пользователь просматривает транзакцию THEN система SHALL показывать тип операции, валюту, сумму, описание и дату
3. WHEN транзакция связана с желанием THEN система SHALL отображать ссылку на соответствующее желание
4. WHEN пользователь фильтрует по типу валюты THEN система SHALL показывать только операции с выбранной валютой
5. WHEN пользователь фильтрует по типу операции THEN система SHALL показывать только операции выбранного типа

### Requirement 10

**User Story:** Как пользователь, я хочу получать достижения за активность, чтобы чувствовать прогресс в системе

#### Acceptance Criteria

1. WHEN пользователь создает первое желание THEN система SHALL присвоить достижение "Первое желание"
2. WHEN пользователь выполняет 5 желаний THEN система SHALL присвоить достижение "Мастер желаний"
3. WHEN пользователь впервые конвертирует валюту THEN система SHALL присвоить достижение "Конвертер"
4. WHEN пользователь выполняет красное желание THEN система SHALL присвоить достижение "Легендарный исполнитель"
5. WHEN пользователь получает достижение THEN система SHALL уведомить его об этом
6. WHEN пользователь просматривает профиль THEN система SHALL отображать все полученные достижения